<% layout("/layouts/boilerplate") %>

<div id="filters">
  <a href="/listings/category=Trending" class="filter">
    <i class="fa-solid fa-fire"></i>
    <p>Trending</p>
  </a>
  <a href="/listings/category=Rooms" class="filter">
    <i class="fa-solid fa-bed"></i>
    <p>Rooms</p>
  </a>
  <a href="/listings/category=Iconic Cities" class="filter">
    <i class="fa-solid fa-mountain-city"></i>
    <p>Iconic Cities</p>
  </a>
  <a href="/listings/category=Mountains" class="filter">
    <i class="fa-solid fa-mountain"></i>
    <p>Mountains</p>
  </a>
  <a href="/listings/category=Castles" class="filter">
    <i class="fa-brands fa-fort-awesome"></i>
    <p>Castles</p>
  </a>
  <a href="/listings/category=Amazing Pools" class="filter">
    <i class="fa-solid fa-person-swimming"></i>
    <p>Amazing Pools</p>
  </a>
  <a href="/listings/category=Camping" class="filter">
    <i class="fa-solid fa-campground"></i>
    <p>Camping</p>
  </a>
  <a href="/listings/category=Farms" class="filter">
    <i class="fa-solid fa-tractor"></i>
    <p>Farms</p>
  </a>
</div>

<div class="row g-4">
  <% allListings.forEach(listing => { %>

    <div class="col-sm-6 col-md-4 col-lg-3">

      <a href="/listings/<%= listing._id %>" class="listing-link">

        <div class="listing-card">

          <div class="image-container">

            <img
              src="<%= listing.image.url %>"
              class="listing-img"
              alt="<%= listing.title %>"
            >

            <button class="heart-btn">
              <i class="fa-regular fa-heart"></i>
            </button>

            <div class="price-tag">
              â‚¹ <%= listing.price.toLocaleString("en-IN") %> night
            </div>

          </div>

          <div class="card-body">

            <p class="card-title">
              <%= listing.title %>
            </p>

            <p class="text-muted">
              <%= listing.location %>, <%= listing.country %>
            </p>

          </div>

        </div>

      </a>

    </div>

  <% }) %>
</div>

<% if (totalPages > 1) { %>

<nav class="mt-4">

  <ul class="pagination justify-content-center">

    <% for (let i = 1; i <= totalPages; i++) { %>

      <li class="page-item <%= i === page ? 'active' : '' %>">

        <a class="page-link" href="?page=<%= i %>">
          <%= i %>
        </a>

      </li>

    <% } %>

  </ul>

</nav>

<% } %>
